<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title>Lista de rubros</title>
</h:head>

<h:body>
    <h:form id="form">
        <p:growl id="msgs" showDetail="true"/>

        <h:outputText>Listado de rubros</h:outputText>

        <p:dataTable value="#{gestionarRubrosBean.getRubros()}" var="rubro" editable="true">

            <p:ajax event="rowEdit" listener="#{gestionarRubrosBean.onRowEdit}" update=":form:msgs" />
            <p:ajax event="rowEditCancel" listener="#{gestionarRubrosBean.onRowCancel}" update=":form:msgs"/>

            <p:column headerText="Id">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{rubro.id}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputNumber id="modelInput2" value="#{rubro.id}" style="width:100%" readonly="true"/>
                    </f:facet>
                </p:cellEditor>
            </p:column>
            <p:column headerText="Nombre">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{rubro.nombre}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText id="modelInput" value="#{rubro.nombre}" style="width:100%"/>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column style="width:6rem">
                <p:rowEditor editTitle="Editar Rubro" cancelTitle="Cancelar Edicion" saveTitle="Guardar Cambios"/>
            </p:column>
            <p:column style="width:6rem">
                <p:growl id="message" showDetail="true"/>
                <p:commandButton value="Borrar" action="#{gestionarRubrosBean.borrarRubro(rubro)}" update=":form:msgs" styleClass="ui-button-danger" icon="pi pi-times">
                    <p:confirm header="Confirmar" message="Esta seguro de eliminar este Rubro ?" icon="pi pi-info-circle"/>
                </p:commandButton>
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" responsive="true" width="350">
                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes"/>
                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no ui-button-flat"/>
                </p:confirmDialog>
            </p:column>
        </p:dataTable>
    </h:form>
    <br/><br/>
    <h:form>
        <p:outputLabel value="Alta de rubro" /><p:spacer/><br/><br/>
        <p:panelGrid columns="2" cellpadding="7">
            <h:outputLabel value="Nombre:" for="nombre"/>
            <p:inputText id="nombre" value="#{gestionarRubrosBean.nombre}" required="true"></p:inputText>
        </p:panelGrid>
        <br/>

        <p:commandButton value="Aceptar" action="#{gestionarRubrosBean.AltaRubro}" />
    </h:form>
</h:body>

</html>
